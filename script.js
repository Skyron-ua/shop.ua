/* CONFIG */
const CONFIG = {
CONTACT: {
TG_USERNAME: "Skyron_ua",
VIBER_INVITE: "https://invite.viber.com/?g2=AQBeex4BIEUJJlW4bdj1yeAO7w846m1dQ6AzkdYO2N%2Bt6FAv7rl5TWDkjrKKKt7t",
SUPPORT_PHONE: "+380733337278"
},
BOT_TOKEN: "8524397744:AAFwG7nIJdIYwCXgU8B_AhhE_X6Xnm3xGOY",
CHAT_ID: "7864653279",
PRODUCTS: [
  {
    "id": "polar",
    "name": "PolarFleece ‚Äî —Ç–µ–ø–ª–ª–∏–π —Ñ–ª—ñ—Å–æ–≤–∏–π –∫–æ—Å—Ç—é–º",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å ‚Äî —Ç–µ–ø–ª–æ –¥–æ ‚àí10¬∞C",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1099,
    "colors": [
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#0b0b0b",
        "images": [
          "images/fleece/1.png",
          "images/fleece/2.png"
        ]
      },
      {
        "id": "anthracite",
        "name": "–ê–Ω—Ç—Ä–∞—Ü–∏—Ç",
        "hex": "#616267",
        "images": [
          "images/fleece/10.png",
          "images/fleece/11.png"
        ]
      },
      {
        "id": "beige",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/fleece/20.png",
          "images/fleece/21.png"
        ]
      },
      {
        "id": "emerald",
        "name": "–°–º–∞—Ä–∞–≥–¥",
        "hex": "#00a86b",
        "images": [
          "images/fleece/50.png"
        ]
      }
    ],
    "old_price": 1799
  },
  {
    "id": "sweater",
    "name": "–°–≤–µ—Ç—Ä Oslo Spirit",
    "description": "–ü—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –≤–µ—á—ñ—Ä–æ–∫,—Å–≤—è—Ç, —Ç–∞ –¥–ª—è –ø–æ–≤—Å—è–∫–¥–µ–Ω–Ω–æ–≥–æ –Ω–æ—Å—ñ–Ω–Ω—è.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª: –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1049,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img/3.png",
          "images/img/4.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img/1.png",
          "images/img/2.png"
        ]
      },
      {
        "id": "beige",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/img/5.png",
          "images/img/6.png"
        ]
      },
      {
        "id": "gray",
        "name": "–°—ñ—Ä–∏–π",
        "hex": "#a5aaa1dc",
        "images": [
          "images/img/7.png",
          "images/img/8.png"
        ]
      }
    ],
    "old_price": 1349
  },
  {
    "id": "gudzik",
    "name": "–¢–µ–ø–ª–∏–π —Ñ–ª—ñ—Å–æ–≤–∏–π –∫–æ—Å—Ç—é–º Urban Winter",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1349,
    "colors": [
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.gudzik/4.png",
          "images/img.gudzik/3.png",
          "images/img.gudzik/2.png",
          "images/img.gudzik/1.png"
        ]
      },
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.gudzik/5.png",
          "images/img.gudzik/6.png",
          "images/img.gudzik/7.png",
          "images/img.gudzik/8.png",
          "images/img.gudzik/9.png"
        ]
      }
    ],
    "old_price": 1749
  },
  {
    "id": "plush",
    "name": "–ü—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫–æ—Å—Ç—é–º Royal Prime",
    "description": "–¢–µ–ø–ª–∏–π —Ñ–ª—ñ—Å–æ–≤–∏–π –∫–æ—Å—Ç—é–º Royal Prime ‚Äî —Ç–µ–ø–ª–æ –¥–æ -15¬∞C –±–µ–∑ –∑–∞–π–≤–æ–≥–æ –æ–± º—î–º—É",
    "features": [
      "üî• –†–µ–∞–ª—å–Ω–æ —Ç–µ–ø–ª–∏–π ‚Äî –∫–æ–º—Ñ–æ—Ä—Ç –Ω–∞–≤—ñ—Ç—å —É —Ö–æ–ª–æ–¥ –¥–æ -15¬∞C",
      "üß∏ –ú º—è–∫–∏–π –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π —Ñ–ª—ñ—Å ‚Äî –ø—Ä–∏—î–º–Ω–∏–π –¥–æ —Ç—ñ–ª–∞, –Ω–µ –∫–æ–ª–µ—Ç—å—Å—è",
      "üßç –ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∏–π –∫—Ä—ñ–π ‚Äî –Ω–µ —Å–∫–æ–≤—É—î —Ä—É—Ö–∏, –∑—Ä—É—á–Ω–æ —Ü—ñ–ª–∏–π –¥–µ–Ω—å",
      "‚úîÔ∏è –Ü–¥–µ–∞–ª—å–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî –ø—ñ–¥–±–∏—Ä–∞—î–º–æ —Ä–æ–∑–º—ñ—Ä –ø–æ –∑—Ä–æ—Å—Ç—É —ñ –≤–∞–∑—ñ",
      "üì¶ –®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é"
    ],
    "price": 1249,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.plush/1.png",
          "images/img.plush/2.png",
          "images/img.plush/3.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.plush/6.png",
          "images/img.plush/5.png",
          "images/img.plush/4.png"
        ]
      },
      {
        "id": "white",
        "name": "–ë—ñ–ª–∏–π",
        "hex": "#f6f6f8ff",
        "images": [
          "images/img.plush/7.png",
          "images/img.plush/8.png",
          "images/img.plush/9.png"
        ]
      },
      {
        "id": "khaki",
        "name": "–•–∞–∫—ñ",
        "hex": "#78866b",
        "images": [
          "images/img.plush/10.png",
          "images/img.plush/11.png",
          "images/img.plush/12.png"
        ]
      },
      {
        "id": "grey",
        "name": "–°—ñ—Ä–∏–π",
        "hex": "#bbbbbb",
        "images": [
          "images/img.plush/13.png",
          "images/img.plush/14.png",
          "images/img.plush/15.png"
        ]
      },
      {
        "id": "beige",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/img.plush/16.png",
          "images/img.plush/17.png",
          "images/img.plush/18.png"
        ]
      },
      {
        "id": "burgundy",
        "name": "–ë–æ—Ä–¥–æ",
        "hex": "#790604",
        "images": [
          "images/img.plush/19.png",
          "images/img.plush/20.png",
          "images/img.plush/21.png"
        ]
      },
      {
        "id": "brown",
        "name": "–ö–æ—Ä–∏—á–Ω–µ–≤–∏–π",
        "hex": "#654321",
        "images": [
          "images/img.plush/22.png",
          "images/img.plush/23.png",
          "images/img.plush/24.png"
        ]
      },
      {
        "id": "emerald",
        "name": "–°–º–∞—Ä–∞–≥–¥",
        "hex": "#00a86b",
        "images": [
          "images/img.plush/25.png",
          "images/img.plush/26.png",
          "images/img.plush/27.png"
        ]
      },
      {
        "id": "blue",
        "name": "–°–∏–Ω—ñ–π",
        "hex": "#000080",
        "images": [
          "images/img.plush/28.png",
          "images/img.plush/29.png",
          "images/img.plush/30.png"
        ]
      }
    ],
    "old_price": 1899
  },
  {
    "id": "bayer",
    "name": "–¢–µ–ø–ª–∏–π –∑–∏–º–æ–≤–∏–π –∫–æ—Å—Ç—é–º Nordic",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1149,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.bayer/1.png",
          "images/img.bayer/2.png",
          "images/img.bayer/3.png",
          "images/img.bayer/4.png",
          "images/img.bayer/5.png",
          "images/img.bayer/6.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.bayer/7.png",
          "images/img.bayer/8.png",
          "images/img.bayer/9.png"
        ]
      },
      {
        "id": "biege",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/img.bayer/10.png",
          "images/img.bayer/11.png",
          "images/img.bayer/12.png"
        ]
      }
    ],
    "old_price": 1549
  },
  {
    "id": "zefir",
    "name": "–ó–∏–º–æ–≤–∏–π –∫–æ—Å—Ç—é–º Shift",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1349,
    "colors": [
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.zefir/1.png",
          "images/img.zefir/2.png",
          "images/img.zefir/3.png",
          "images/img.zefir/4.png",
          "images/img.zefir/5.png"
        ]
      },
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.zefir/6.png",
          "images/img.zefir/7.png",
          "images/img.zefir/8.png",
          "images/img.zefir/9.png",
          "images/img.zefir/10.png"
        ]
      },
      {
        "id": "emerald",
        "name": "–°–º–∞—Ä–∞–≥–¥",
        "hex": "#00a86b",
        "images": [
          "images/img.zefir/11.png",
          "images/img.zefir/12.png",
          "images/img.zefir/13.png",
          "images/img.zefir/14.png",
          "images/img.zefir/15.png"
        ]
      }
    ],
    "old_price": 1749
  },
  {
    "id": "plashovka",
    "name": "–ö–æ—Å—Ç—é–º Nowind",
    "description": "–ù–µ –ø—Ä–æ–¥—É–≤–∞—î, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –Ω–æ—Å—ñ–Ω–Ω—è –≤ –Ω–µ–ø–æ–≥–æ–¥—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1249,
    "colors": [
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.plashovka/1.png",
          "images/img.plashovka/2.png",
          "images/img.plashovka/3.png",
          "images/img.plashovka/4.png",
          "images/img.plashovka/5.png",
          "images/img.plashovka/6.png"
        ]
      },
      {
        "id": "khaki",
        "name": "–•–∞–∫—ñ",
        "hex": "#78866b",
        "images": [
          "images/img.plashovka/7.png",
          "images/img.plashovka/8.png",
          "images/img.plashovka/9.png",
          "images/img.plashovka/10.png",
          "images/img.plashovka/11.png",
          "images/img.plashovka/12.png"
        ]
      },
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.plashovka/13.png",
          "images/img.plashovka/14.png",
          "images/img.plashovka/15.png",
          "images/img.plashovka/16.png"
        ]
      },
      {
        "id": "grey",
        "name": "–°—ñ—Ä–∏–π",
        "hex": "#bbbbbb",
        "images": [
          "images/img.plashovka/17.png",
          "images/img.plashovka/18.png"
        ]
      }
    ],
    "old_price": 1599
  },
  {
    "id": "zamsh-na-zmiyci",
    "name": "–ö–æ—Å—Ç—é–º Velvet",
    "description": "–ü—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –≤–µ—á—ñ—Ä–æ–∫,—Å–≤—è—Ç, —Ç–∞ –¥–ª—è –ø–æ–≤—Å—è–∫–¥–µ–Ω–Ω–æ–≥–æ –Ω–æ—Å—ñ–Ω–Ω—è.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1549,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.zamsh/3.png",
          "images/img.zamsh/4.png",
          "images/img.zamsh/5.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.zamsh/1.png",
          "images/img.zamsh/9.png",
          "images/img.zamsh/2.png"
        ]
      },
      {
        "id": "blue",
        "name": "–°–∏–Ω—ñ–π",
        "hex": "#000080",
        "images": [
          "images/img.zamsh/6.png",
          "images/img.zamsh/7.png",
          "images/img.zamsh/8.png"
        ]
      }
    ],
    "old_price": 1899
  },
  {
    "id": "chelsi",
    "name": "–¢–µ–ø–ª–∏–π –∫–æ—Å—Ç—é–º Apex",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1529,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.chelsi/6.png",
          "images/img.chelsi/7.png",
          "images/img.chelsi/8.png",
          "images/img.chelsi/9.png",
          "images/img.chelsi/10.png"
        ]
      },
      {
        "id": "biege",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/img.chelsi/11.png",
          "images/img.chelsi/12.png",
          "images/img.chelsi/13.png",
          "images/img.chelsi/14.png",
          "images/img.chelsi/15.png"
        ]
      },
      {
        "id": "pistachio",
        "name": "–§—ñ—Å—Ç–∞—à–∫–æ–≤–∏–π",
        "hex": "#84B067",
        "images": [
          "images/img.chelsi/1.png",
          "images/img.chelsi/2.png",
          "images/img.chelsi/3.png",
          "images/img.chelsi/4.png",
          "images/img.chelsi/5.png"
        ]
      },
      {
        "id": "khaki",
        "name": "–•–∞–∫—ñ",
        "hex": "#78866b",
        "images": [
          "images/img.chelsi/16.png",
          "images/img.chelsi/17.png",
          "images/img.chelsi/18.png",
          "images/img.chelsi/19.png",
          "images/img.chelsi/20.png"
        ]
      }
    ],
    "old_price": 1829
  },
  {
    "id": "polar-premium",
    "name": "–¢–µ–ø–ª–∏–π –∫–æ—Å—Ç—é–º Fortress",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1729,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.polarpremium/7.png",
          "images/img.polarpremium/5.png",
          "images/img.polarpremium/6.png",
          "images/img.polarpremium/4.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.polarpremium/2.png",
          "images/img.polarpremium/1.png",
          "images/img.polarpremium/3.png"
        ]
      }
    ],
    "old_price": 2129
  },
  {
    "id": "puhovik",
    "name": "–ó–∏–º–æ–≤–∏–π –ø—É—Ö–æ–≤–∏–∫ Puff",
    "description": "–¢–µ–ø–ª–∏–π, –ª–µ–≥–∫–∏–π —Ç–∞ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1849,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.puhovik/9.png",
          "images/img.puhovik/11.png",
          "images/img.puhovik/12.png",
          "images/img.puhovik/7.png",
          "images/img.puhovik/8.png",
          "images/img.puhovik/16.png",
          "images/img.puhovik/14.png",
          "images/img.puhovik/15.png",
          "images/img.puhovik/10.png",
          "images/img.puhovik/13.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.puhovik/1.png",
          "images/img.puhovik/3.png",
          "images/img.puhovik/4.png",
          "images/img.puhovik/2.png",
          "images/img.puhovik/5.png",
          "images/img.puhovik/6.png"
        ]
      },
      {
        "id": "blue",
        "name": "–°–∏–Ω—ñ–π",
        "hex": "#000080",
        "images": [
          "images/img.puhovik/17.png",
          "images/img.puhovik/18.png",
          "images/img.puhovik/19.png",
          "images/img.puhovik/20.png",
          "images/img.puhovik/21.png",
          "images/img.puhovik/22.png",
          "images/img.puhovik/23.png",
          "images/img.puhovik/24.png",
          "images/img.puhovik/25.png",
          "images/img.puhovik/26.png",
          "images/img.puhovik/27.png"
        ]
      },
      {
        "id": "emerald",
        "name": "–°–º–∞—Ä–∞–≥–¥",
        "hex": "#00a86b",
        "images": [
          "images/img.puhovik/28.png",
          "images/img.puhovik/29.png",
          "images/img.puhovik/30.png",
          "images/img.puhovik/31.png",
          "images/img.puhovik/32.png",
          "images/img.puhovik/33.png"
        ]
      }
    ],
    "old_price": 2199
  },
  {
    "id": "balaklava",
    "name": "–ó–∏–º–æ–≤–∞ —à–∞–ø–∫–∞ Ghost",
    "description": "–õ–µ–≥–∫–∞, —Ç–µ–ø–ª–∞ —Ç–∞ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 549,
    "colors": [
      {
        "id": "khaki",
        "name": "–•–∞–∫—ñ",
        "hex": "#4B5320",
        "images": [
          "images/img.balaklava/4.png",
          "images/img.balaklava/3.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.balaklava/1.png",
          "images/img.balaklava/2.png"
        ]
      },
      {
        "id": "camouflage",
        "name": "–ö–∞–º—É—Ñ–ª—è–∂",
        "hex": "#78866b",
        "images": [
          "images/img.balaklava/7.png",
          "images/img.balaklava/8.png",
          "images/img.balaklava/5.png",
          "images/img.balaklava/6.png"
        ]
      },
      {
        "id": "camouflage biege",
        "name": "–ö–∞–º—É—Ñ–ª—è–∂ –ë–µ–∂",
        "hex": "#e4e3beff",
        "images": [
          "images/img.balaklava/13.png",
          "images/img.balaklava/14.png",
          "images/img.balaklava/15.png"
        ]
      }
    ],
    "old_price": 649
  },
  {
    "id": "shapka-baf",
    "name": "–ó–∏–º–æ–≤–∞ —à–∞–ø–∫–∞+–±–∞—Ñ Duo",
    "description": "–ó–∏–º–æ–≤–∏–π –∫–æ–º–ª–µ–∫—Ç.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 499,
    "colors": [
      {
        "id": "biege",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/img.baf/4.png",
          "images/img.baf/3.png",
          "images/img.baf/5.png"
        ]
      },
      {
        "id": "khaki",
        "name": "–•–∞–∫—ñ",
        "hex": "#4B5320",
        "images": [
          "images/img.baf/10.png",
          "images/img.baf/9.png",
          "images/img.baf/12.png"
        ]
      }
    ],
    "old_price": 649
  },
  {
    "id": "plush-kapyshon",
    "name": "–ó–∏–º–æ–≤–∏–π –∫–æ—Å—Ç—é–º Titan",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1349,
    "colors": [
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.plush.kapyshon/10.png",
          "images/img.plush.kapyshon/11.png",
          "images/img.plush.kapyshon/12.png",
          "images/img.plush.kapyshon/9.png",
          "images/img.plush.kapyshon/8.png",
          "images/img.plush.kapyshon/7.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.plush.kapyshon/1.png",
          "images/img.plush.kapyshon/2.png",
          "images/img.plush.kapyshon/3.png",
          "images/img.plush.kapyshon/4.png",
          "images/img.plush.kapyshon/5.png",
          "images/img.plush.kapyshon/6.png"
        ]
      },
      {
        "id": "khaki",
        "name": "–•–∞–∫—ñ",
        "hex": "#4B5320",
        "images": [
          "images/img.plush.kapyshon/19.png",
          "images/img.plush.kapyshon/21.png",
          "images/img.plush.kapyshon/20.png"
        ]
      },
      {
        "id": "beige",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/img.plush.kapyshon/13.png",
          "images/img.plush.kapyshon/14.png",
          "images/img.plush.kapyshon/15.png",
          "images/img.plush.kapyshon/16.png",
          "images/img.plush.kapyshon/17.png",
          "images/img.plush.kapyshon/18.png"
        ]
      }
    ],
    "old_price": 1699
  },
  {
    "id": "zmeyka",
    "name": "–ó–∏–º–æ–≤–∏–π –∫–æ—Å—Ç—é–º Vortex",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1129,
    "colors": [
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.zmeyka/1.png",
          "images/img.zmeyka/2.png",
          "images/img.zmeyka/3.png",
          "images/img.zmeyka/4.png"
        ]
      },
      {
        "id": "khaki",
        "name": "–•–∞–∫—ñ",
        "hex": "#4B5320",
        "images": [
          "images/img.zmeyka/9.png",
          "images/img.zmeyka/10.png",
          "images/img.zmeyka/11.png"
        ]
      },
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#616267",
        "images": [
          "images/img.zmeyka/5.png",
          "images/img.zmeyka/7.png",
          "images/img.zmeyka/6.png",
          "images/img.zmeyka/8.png"
        ]
      }
    ],
    "old_price": 1479
  },
  {
    "id": "oversize-premium",
    "name": "–¢–µ–ø–ª–∏–π –∫–æ—Å—Ç—é–º OverSize Premium",
    "description": "–ü–ª–æ—Ç–Ω–∏–π —Ñ–ª—ñ—Å, –ø—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π –∫—Ä—ñ–π ‚Äî –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ –¥–ª—è –≤—É–ª–∏—Ü—ñ, —ñ –¥–ª—è –¥–æ–º—É.",
    "features": [
      "–Ø–∫—ñ—Å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π —á–∞—Å–æ–º",
      "–ê–Ω–∞—Ç–æ–º—ñ—á–Ω–∞ –ø–æ—Å–∞–¥–∫–∞ ‚Äî —Ä–æ–∑–º—ñ—Ä–∏ S‚ÄìXXL",
      "–®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ù–æ–≤–æ—é –ü–æ—à—Ç–æ—é (1‚Äì3 –¥–Ω—ñ)"
    ],
    "price": 1849,
    "colors": [
      {
        "id": "biege",
        "name": "–ë–µ–∂",
        "hex": "#d6c7b1",
        "images": [
          "images/img.oversize/20.png",
          "images/img.oversize/18.png",
          "images/img.oversize/19.png",
          "images/img.oversize/21.png"
        ]
      },
      {
        "id": "black",
        "name": "–ß–æ—Ä–Ω–∏–π",
        "hex": "#111113ff",
        "images": [
          "images/img.oversize/1.png",
          "images/img.oversize/2.png",
          "images/img.oversize/3.png",
          "images/img.oversize/4.png",
          "images/img.oversize/5.png",
          "images/img.oversize/6.png"
        ]
      },
      {
        "id": "graphite",
        "name": "–ì—Ä–∞—Ñ—ñ—Ç",
        "hex": "#5b7194",
        "images": [
          "images/img.oversize/7.png",
          "images/img.oversize/8.png",
          "images/img.oversize/9.png",
          "images/img.oversize/10.png",
          "images/img.oversize/11.png",
          "images/img.oversize/12.png",
          "images/img.oversize/13.png"
        ]
      },
      {
        "id": "anyhracite",
        "name": "–ê–Ω—Ç—Ä–∞—Ü–∏—Ç",
        "hex": "#45464c",
        "images": [
          "images/img.oversize/14.png",
          "images/img.oversize/15.png",
          "images/img.oversize/16.png",
          "images/img.oversize/17.png"
        ]
      },
      {
        "id": "brown",
        "name": "–ö–æ—Ä–∏—á–Ω–µ–≤–∏–π",
        "hex": "#654321",
        "images": [
          "images/img.oversize/22.png",
          "images/img.oversize/23.png",
          "images/img.oversize/24.png",
          "images/img.oversize/25.png",
          "images/img.oversize/26.png"
        ]
      }
    ],
    "old_price": 2149
  }
]
};

/* Helpers */
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
const encode = s => encodeURIComponent(s);

/* Cart */
let cart = JSON.parse(localStorage.getItem('cart')) || [];

/* –°—Ç–∏–ª—ñ */
const style = document.createElement('style');
style.textContent = `
#addToCartModal {
display: none;
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background: rgba(0,0,0,0.6);
align-items: center;
justify-content: center;
z-index: 1000;
}
#addToCartModal.active {
display: flex;
}
.modal-content {
background: var(--bg, #fff);
padding: 20px; /* –£–º–µ–Ω—å—à–∏–ª padding –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ */
border-radius: 12px; /* –ú–µ–Ω—å—à–µ —Ä–∞–¥–∏—É—Å –¥–ª—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç–∏ */
text-align: center;
max-width: 400px; /* –£–º–µ–Ω—å—à–∏–ª max-width */
width: 90%;
box-shadow: 0 5px 15px rgba(0,0,0,0.2); /* –õ–µ–≥—á–µ —Ç–µ–Ω—å */
}
.modal-content h3 {
margin: 0 0 15px 0; /* –ú–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø */
font-size: 1.2em; /* –ú–µ–Ω—å—à–µ —à—Ä–∏—Ñ—Ç */
}
.modal-buttons {
display: flex;
gap: 10px; /* –ú–µ–Ω—å—à–µ gap */
justify-content: center;
margin-top: 15px; /* –ú–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø */
}
.modal-buttons button {
padding: 10px 20px; /* –£–º–µ–Ω—å—à–∏–ª padding –∫–Ω–æ–ø–æ–∫ */
border: none;
border-radius: 6px; /* –ú–µ–Ω—å—à–µ —Ä–∞–¥–∏—É—Å */
font-size: 0.9em; /* –ú–µ–Ω—å—à–µ —à—Ä–∏—Ñ—Ç */
cursor: pointer;
}
.modal-buttons .continue {
background: #e0e0e0; /* –°–≤–µ—Ç–ª–µ–µ —Ñ–æ–Ω */
color: #333;
}
.modal-buttons .go-cart {
background: var(--accent, #007bff);
color: white;
}

.actions { gap: 20px !important; }

@media (max-width: 768px) {
#cartItems { padding: 0 15px; }
.cart-item { padding: 15px 0; }
.modal-content {
padding: 15px;
max-width: 300px;
}
.modal-content h3 {
font-size: 1.1em;
}
.modal-buttons button {
padding: 8px 16px;
font-size: 0.85em;
}
}
`;
document.head.appendChild(style);

/* –ú–æ–¥–∞–ª–∫–∞ */
const addToCartModal = document.createElement('div');
addToCartModal.id = 'addToCartModal';
addToCartModal.innerHTML = `
<div class="modal-content">
<h3>–¢–æ–≤–∞—Ä –¥–æ–¥–∞–Ω–æ –¥–æ –∫–æ—à–∏–∫–∞</h3>
<div class="modal-buttons">
<button class="continue">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
<button class="go-cart">–î–æ –∫–æ—à–∏–∫–∞</button>
</div>
</div>
`;
document.body.appendChild(addToCartModal);

function showAddToCartModal() {
addToCartModal.classList.add('active');
}

addToCartModal.addEventListener('click', (e) => {
if (e.target === addToCartModal || e.target.classList.contains('continue')) {
addToCartModal.classList.remove('active');
}
});
addToCartModal.querySelector('.go-cart').addEventListener('click', () => {
addToCartModal.classList.remove('active');
window.location.href = 'cart.html';
});

/* Init */
document.addEventListener("DOMContentLoaded", () => {
$$('#year').forEach(el => el.textContent = new Date().getFullYear());

$$('.btn-telegram').forEach(btn => btn.addEventListener("click", () => window.open(`https://t.me/${CONFIG.CONTACT.TG_USERNAME}`, "_blank")));
$$('.btn-viber').forEach(btn => btn.addEventListener("click", () => window.open(CONFIG.CONTACT.VIBER_INVITE, "_blank")));

const menuToggle = $("#menuToggle");
const navMenu = $("#navMenu");
if (menuToggle && navMenu) {
menuToggle.addEventListener("click", () => navMenu.classList.toggle("active"));
}

const page = window.location.pathname.split('/').pop() || 'index.html';
if (page === 'index.html') initHome();
else if (page === 'catalog.html') initCatalog();
else if (page === 'product.html') initProduct();
else if (page === 'cart.html') initCart();

const themeToggle = $("#themeToggle");
if (themeToggle) {
themeToggle.addEventListener("click", () => {
document.body.classList.toggle("dark-mode");
themeToggle.textContent = document.body.classList.contains("dark-mode") ? "üåô" : "‚òÄÔ∏è";
});
}

updateCartBadge();

const observer = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting) entry.target.classList.add("visible");
});
});
$$(".fade-in").forEach(el => observer.observe(el));
});

/* Home */
function initHome() {
buildCatalog(CONFIG.PRODUCTS.slice(0, 3), $("#featuredGrid"), true);
const productSelect = $("#productSelect");
productSelect.innerHTML = '<option value="">–û–±–µ—Ä—ñ—Ç—å —Ç–æ–≤–∞—Ä</option>';
CONFIG.PRODUCTS.forEach(p => {
const opt = document.createElement("option");
opt.value = p.id;
opt.textContent = p.name;
productSelect.appendChild(opt);
});
productSelect.addEventListener("change", updateColorSelect);
updateColorSelect();
selectProduct(CONFIG.PRODUCTS[0].id); // hero image
setupForm();
updateOrderSummary();
}

/* Catalog */
function initCatalog() {
buildCatalog(CONFIG.PRODUCTS, $("#catalogGrid"));
}

function buildCatalog(products, grid) {
products.forEach(p => {
const firstColor = p.colors[0] || { name: "–°—Ç–∞–Ω–¥–∞—Ä—Ç", images: ["images/placeholder.jpg"] };
const card = document.createElement("div");
card.className = "card";
card.innerHTML = `
<img src="${firstColor.images[0]}" alt="${p.name}">
<div class="meta">
<div class="name">${p.name}</div>
<div class="price">
${p.old_price ? `<span class="old-price">${p.old_price} –≥—Ä–Ω</span>` : ''}
<span class="new-price">${p.price} –≥—Ä–Ω</span>
</div>
</div>
`;
grid.appendChild(card);
card.addEventListener("click", () => window.location.href = `product.html?id=${p.id}`);
});
}

/* Product */
function initProduct() {
const urlParams = new URLSearchParams(window.location.search);
const productId = urlParams.get('id');
const product = CONFIG.PRODUCTS.find(p => p.id === productId);
if (!product) return;

$("#productTitle").textContent = product.name;
$("#productDescription").textContent = product.description;
$("#productPrice").innerHTML = `${product.old_price ? `<span class="old-price">${product.old_price} –≥—Ä–Ω</span>` : ''} <span class="new-price">${product.price} –≥—Ä–Ω</span>`;
const featuresList = $("#productFeatures");
product.features.forEach(f => {
const li = document.createElement("li");
li.textContent = f;
featuresList.appendChild(li);
});

selectProduct(product.id);

// –¢—Ä–µ–∫—ñ–Ω–≥ ViewContent
ttq.track('ViewContent', {
  content_id: product.id,
  content_name: product.name,
  value: product.price,
  currency: 'UAH'
});

// –•–æ–≤–∞—î–º–æ –ø–æ–ª—è —Ä–æ—Å—Ç—É —ñ –≤–∞–≥–∏ –¥–ª—è —à–∞–ø–æ–∫
const hatIds = ['balaklava', 'shapka-baf'];
if (hatIds.includes(productId)) {
  const formRow = document.querySelector('.form-row');
  if (formRow) formRow.style.display = 'none';
}

// Update sticky price
const stickyPrice = document.getElementById("stickyPrice");
if (stickyPrice) {
  stickyPrice.textContent = `${product.price} –≥—Ä–Ω`;
}

// Sticky add to cart functionality
const stickyBtn = document.getElementById("stickyAddToCart");
if (stickyBtn) {
  stickyBtn.querySelector("button").addEventListener("click", () => {
    document.getElementById("addToCartBtn").click();
  });
}

const sellingBlock = document.getElementById("sellingBlock");
const sizeTable = document.getElementById("sizeTable");
if (productId === "plush") {
  if (sellingBlock) sellingBlock.style.display = "block";
  if (sizeTable) sizeTable.style.display = "block";
  // Optional: Add more images or dynamic content
}

$("#addToCartBtn").addEventListener("click", () => {
const colorId = $(".swatch.active")?.dataset.id;
const height = $("#height").value;
const weight = $("#weight").value;

const isHat = hatIds.includes(productId);
if (colorId && (isHat || (height && weight))) {
addToCart({ productId, colorId, height: isHat ? 'N/A' : height, weight: isHat ? 'N/A' : weight });
showAddToCartModal();

// –¢—Ä–µ–∫—ñ–Ω–≥ AddToCart
ttq.track('AddToCart', {
  content_id: product.id,
  content_name: product.name,
  value: product.price,
  currency: 'UAH'
});

const cartIcon = $(".cart-link");
const img = $("#mainImage");
flyToCartEffect(img, cartIcon);

updateCartBadge();
updateOrderSummary();
} else {
alert("–í–∫–∞–∂—ñ—Ç—å, –±—É–¥—å –ª–∞—Å–∫–∞, –∑—Ä—ñ—Å—Ç —Ç–∞ –≤–∞–≥—É üôè");
}
});
}

/* –ï—Ñ–µ–∫—Ç –ø–æ–ª—å–æ—Ç—É */
function flyToCartEffect(img, cartIcon) {
if (!img || !cartIcon) return;
const clone = img.cloneNode();
clone.style.position = "fixed";
clone.style.zIndex = "9999";
clone.style.width = img.offsetWidth + "px";
clone.style.height = img.offsetHeight + "px";
clone.style.top = img.getBoundingClientRect().top + "px";
clone.style.left = img.getBoundingClientRect().left + "px";
clone.style.transition = "all 0.6s ease-in-out";
clone.style.borderRadius = "8px";
document.body.appendChild(clone);

setTimeout(() => {
clone.style.width = "30px";
clone.style.height = "30px";
clone.style.top = cartIcon.getBoundingClientRect().top + "px";
clone.style.left = cartIcon.getBoundingClientRect().left + "px";
clone.style.opacity = "0.6";
}, 50);

setTimeout(() => clone.remove(), 800);
}

/* Color & Carousel */
let activeProduct, activeImages = [], currentIndex = 0;

function selectProduct(id) {
activeProduct = CONFIG.PRODUCTS.find(p => p.id === id);
const swatches = $("#swatches");
if (swatches) {
swatches.innerHTML = "";
activeProduct.colors.forEach((c, i) => {
const sw = document.createElement("button");
sw.className = "swatch";
sw.style.background = c.hex;
sw.dataset.id = c.id;
if (i === 0) sw.classList.add("active");
swatches.appendChild(sw);
sw.addEventListener("click", () => selectColor(c.id));
});
}
selectColor(activeProduct.colors[0].id);
if ($("#heroPrice")) {
  $("#heroPrice").innerHTML = `${activeProduct.old_price ? `<span class="old-price">${activeProduct.old_price} –≥—Ä–Ω</span>` : ''} <span class="new-price">${activeProduct.price} –≥—Ä–Ω</span>`;
}
}

function selectColor(id) {
const color = activeProduct.colors.find(c => c.id === id);
$$(".swatch").forEach(s => s.classList.toggle("active", s.dataset.id === id));
activeImages = color.images || ["images/placeholder.jpg"];
currentIndex = 0;
activeImages.forEach(src => { const img = new Image(); img.src = src; });
updateMainImage();

const prevBtn = $("#prevBtn");
const nextBtn = $("#nextBtn");
if (prevBtn && nextBtn) {
prevBtn.onclick = () => {
currentIndex = (currentIndex - 1 + activeImages.length) % activeImages.length;
updateMainImage();
};
nextBtn.onclick = () => {
currentIndex = (currentIndex + 1) % activeImages.length;
updateMainImage();
};
}
}

function updateMainImage() {
const main = $("#mainImage");
if (!main) return;
main.style.opacity = "0";
const img = new Image();
img.src = activeImages[currentIndex];
img.onload = () => {
main.src = img.src;
requestAnimationFrame(() => { main.style.opacity = "1"; });
};
}

/* Form –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π */
function setupForm() {
const form = $("#orderForm");
if (!form) return;
form.addEventListener("submit", async (e) => {
e.preventDefault();
const data = gatherForm();
if (!data) return;
const text = `–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è: ${data.productName} (${data.colorName}), –ó—Ä—ñ—Å—Ç: ${data.height} —Å–º, –í–∞–≥–∞: ${data.weight} –∫–≥, –ö—ñ–ª—å–∫—ñ—Å—Ç—å: ${data.qty}, –Ü–º º—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ: ${data.fullName}, –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É: ${data.phone}, –ú—ñ—Å—Ç–æ: ${data.city}, –í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –ø–æ—à—Ç–∏: ${data.postOffice}`;
await sendToTelegram(text);

// –¢—Ä–µ–∫—ñ–Ω–≥ Purchase
ttq.track('Purchase', {
  content_name: data.productName,
  value: data.price * data.qty,
  currency: 'UAH'
});

alert("–î—è–∫—É—î–º–æ –∑–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤ º—è–∂–µ—Ç—å—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º");
form.reset();
updateOrderSummary();
});

$("#productSelect").addEventListener("change", updateColorSelect);
["#height", "#weight", "#qty", "#colorSelect", "#fullName", "#phone", "#city", "#postOffice"].forEach(sel => {
$(sel)?.addEventListener("input", updateOrderSummary);
});
}

function updateColorSelect() {
const productId = $("#productSelect")?.value;
const product = CONFIG.PRODUCTS.find(p => p.id === productId);
const colorSelect = $("#colorSelect");
if (!colorSelect) return;
colorSelect.innerHTML = '<option value="">–û–±–µ—Ä—ñ—Ç—å –∫–æ–ª—ñ—Ä</option>';
colorSelect.disabled = !product;
if (product) {
product.colors.forEach(c => {
const opt = document.createElement("option");
opt.value = c.id;
opt.textContent = c.name;
colorSelect.appendChild(opt);
});
}
updateOrderSummary();
}

function gatherForm() {
const height = $("#height")?.value;
const weight = $("#weight")?.value;
const qty = Number($("#qty")?.value) || 1;
const fullName = $("#fullName")?.value;
const phone = $("#phone")?.value;
const city = $("#city")?.value;
const postOffice = $("#postOffice")?.value;
const productId = $("#productSelect")?.value;
const colorId = $("#colorSelect")?.value;

if (!height || !weight || !fullName || !phone || !city || !postOffice || !productId || !colorId) {
alert("–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è.");
  document.getElementById("height")?.scrollIntoView({
    behavior: "smooth",
    block: "center"
  });

  return null;
}

const product = CONFIG.PRODUCTS.find(p => p.id === productId);
const color = product?.colors.find(c => c.id === colorId);
return { height, weight, qty, fullName, phone, city, postOffice, productName: product.name, colorName: color.name, price: product.price };
}

function updateOrderSummary() {
const qty = Number($("#qty")?.value) || 1;
const height = $("#height")?.value || "‚Äî";
const weight = $("#weight")?.value || "‚Äî";
const productName = $("#productSelect")?.options[$("#productSelect")?.selectedIndex]?.text || "‚Äî";
const colorName = $("#colorSelect")?.options[$("#colorSelect")?.selectedIndex]?.text || "‚Äî";
const product = CONFIG.PRODUCTS.find(p => p.id === $("#productSelect")?.value);

$("#summaryProduct") && ($("#summaryProduct").textContent = `${productName} ‚Äî ${colorName}`);
$("#summaryHeight") && ($("#summaryHeight").textContent = height);
$("#summaryWeight") && ($("#summaryWeight").textContent = weight);
$("#summaryTotal") && ($("#summaryTotal").innerHTML = `${product?.old_price ? `<span class="old-price">${product.old_price * qty} –≥—Ä–Ω</span>` : ''} <span class="new-price">${(product ? product.price : 0) * qty} –≥—Ä–Ω</span>`);
}

/* Cart */
function addToCart(item) {
item.uniqueId = Date.now();
cart.push(item);
localStorage.setItem('cart', JSON.stringify(cart));
updateCartBadge();
updateOrderSummary();
}

function removeFromCart(key) {
cart = cart.filter(i => i.uniqueId !== parseInt(key));
localStorage.setItem('cart', JSON.stringify(cart));
initCart();
updateCartBadge();
updateOrderSummary();
}

function initCart() {
const cartItems = $("#cartItems");
let total = 0;
let old_total = 0;
cart = cart.filter(item => CONFIG.PRODUCTS.find(p => p.id === item.productId)?.colors.find(c => c.id === item.colorId));
localStorage.setItem('cart', JSON.stringify(cart));
cartItems.innerHTML = "";
cart.forEach((i) => {
const product = CONFIG.PRODUCTS.find(p => p.id === i.productId);
const color = product?.colors.find(c => c.id === i.colorId);
if (product && color) {
total += product.price;
old_total += product.old_price || product.price;
cartItems.innerHTML += `
<div class="cart-item" data-key="${i.uniqueId}">
<p>${product.name} (${color.name}, –ó—Ä—ñ—Å—Ç: ${i.height} —Å–º, –í–∞–≥–∞: ${i.weight} –∫–≥)</p>
<p>${product.old_price ? `<span class="old-price">${product.old_price} –≥—Ä–Ω</span>` : ''} <span class="new-price">${product.price} –≥—Ä–Ω</span></p>
<button class="btn btn-danger remove-btn">–í–∏–¥–∞–ª–∏—Ç–∏</button>
</div>
`;
}
});
$("#cartTotal").innerHTML = `${old_total > total ? `<span class="old-price">${old_total} –≥—Ä–Ω</span>` : ''} <span class="new-price">${total} –≥—Ä–Ω</span>`;
$$(".remove-btn").forEach(btn => btn.addEventListener("click", () => removeFromCart(btn.parentElement.dataset.key)));

const checkoutForm = $("#checkoutForm");
if (checkoutForm) {
checkoutForm.addEventListener("submit", async (e) => {
e.preventDefault();
const fullName = $("#fullName").value;
const phone = $("#phone").value;
const city = $("#city").value;
const postOffice = $("#postOffice").value;
if (!fullName || !phone || !city || !postOffice) return alert("–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è");
const lines = cart.map(i => {
const p = CONFIG.PRODUCTS.find(pr => pr.id === i.productId);
const c = p?.colors.find(cl => cl.id === i.colorId);
return p && c ? `${p.name} (${c.name}, –ó—Ä—ñ—Å—Ç: ${i.height} —Å–º, –í–∞–≥–∞: ${i.weight} –∫–≥)` : '';
}).filter(Boolean).join("\n");
const text = `–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–¥ ${fullName} (${phone})\n–ú—ñ—Å—Ç–æ: ${city}\n–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –ø–æ—à—Ç–∏: ${postOffice}\n–¢–æ–≤–∞—Ä–∏:\n${lines}`;
await sendToTelegram(text);

// –¢—Ä–µ–∫—ñ–Ω–≥ Purchase
ttq.track('Purchase', {
  value: total,
  currency: 'UAH'
});

alert("–î—è–∫—É—î–º–æ –∑–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤ º—è–∂–µ—Ç—å—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º");
cart = [];
localStorage.setItem('cart', JSON.stringify(cart));
initCart();
updateCartBadge();
updateOrderSummary();
});
}
}

function updateCartBadge() {
const badge = $("#cartBadge");
if (badge) {
const count = cart.length;
badge.textContent = count;
badge.style.display = count > 0 ? "inline-flex" : "none";
}
}

async function sendToTelegram(message) {
const url = `https://api.telegram.org/bot${CONFIG.BOT_TOKEN}/sendMessage?chat_id=${CONFIG.CHAT_ID}&text=${encodeURIComponent(message)}`;
try {
await fetch(url);
} catch (error) {
console.error("Error sending to Telegram:", error);
}
}

/* Swipe */
(function enableSwipe() {
const img = document.getElementById("mainImage");
if (!img) return;

let startX = 0;

img.addEventListener("touchstart", (e) => {
startX = e.touches[0].clientX;
}, { passive: true });

img.addEventListener("touchend", (e) => {
const endX = e.changedTouches[0].clientX;
const diff = startX - endX;
if (Math.abs(diff) < 50) return;

if (diff > 0) {
currentIndex = (currentIndex + 1) % activeImages.length;
} else {
currentIndex = (currentIndex - 1 + activeImages.length) % activeImages.length;
}
updateMainImage();
}, { passive: true });
})();
